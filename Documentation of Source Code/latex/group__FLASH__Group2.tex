\section{F\+L\+A\+SH Memory Programming functions}
\label{group__FLASH__Group2}\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}


F\+L\+A\+SH Memory Programming functions.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ F\+L\+A\+S\+H\+\_\+\+Unlock} (void)
\begin{DoxyCompactList}\small\item\em Unlocks the F\+L\+A\+SH control register access. \end{DoxyCompactList}\item 
void \textbf{ F\+L\+A\+S\+H\+\_\+\+Lock} (void)
\begin{DoxyCompactList}\small\item\em Locks the F\+L\+A\+SH control register access. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Erase\+Sector} (uint32\+\_\+t F\+L\+A\+S\+H\+\_\+\+Sector, uint8\+\_\+t Voltage\+Range)
\begin{DoxyCompactList}\small\item\em Erases a specified F\+L\+A\+SH Sector. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors} (uint8\+\_\+t Voltage\+Range)
\begin{DoxyCompactList}\small\item\em Erases all F\+L\+A\+SH Sectors. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word} (uint32\+\_\+t Address, uint64\+\_\+t Data)
\begin{DoxyCompactList}\small\item\em Programs a double word (64-\/bit) at a specified address. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Program\+Word} (uint32\+\_\+t Address, uint32\+\_\+t Data)
\begin{DoxyCompactList}\small\item\em Programs a word (32-\/bit) at a specified address. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word} (uint32\+\_\+t Address, uint16\+\_\+t Data)
\begin{DoxyCompactList}\small\item\em Programs a half word (16-\/bit) at a specified address. \end{DoxyCompactList}\item 
\textbf{ F\+L\+A\+S\+H\+\_\+\+Status} \textbf{ F\+L\+A\+S\+H\+\_\+\+Program\+Byte} (uint32\+\_\+t Address, uint8\+\_\+t Data)
\begin{DoxyCompactList}\small\item\em Programs a byte (8-\/bit) at a specified address. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
F\+L\+A\+SH Memory Programming functions. 

\begin{DoxyVerb} ===============================================================================
                      FLASH Memory Programming functions
 ===============================================================================   

   This group includes the following functions:
    - void FLASH_Unlock(void)
    - void FLASH_Lock(void)
    - FLASH_Status FLASH_EraseSector(uint32_t FLASH_Sector, uint8_t VoltageRange)
    - FLASH_Status FLASH_EraseAllSectors(uint8_t VoltageRange)
    - FLASH_Status FLASH_ProgramDoubleWord(uint32_t Address, uint64_t Data)
    - FLASH_Status FLASH_ProgramWord(uint32_t Address, uint32_t Data)
    - FLASH_Status FLASH_ProgramHalfWord(uint32_t Address, uint16_t Data)
    - FLASH_Status FLASH_ProgramByte(uint32_t Address, uint8_t Data)
   
   Any operation of erase or program should follow these steps:
   1. Call the FLASH_Unlock() function to enable the FLASH control register access

   2. Call the desired function to erase sector(s) or program data

   3. Call the FLASH_Lock() function to disable the FLASH control register access
      (recommended to protect the FLASH memory against possible unwanted operation)\end{DoxyVerb}
 

\subsection{Function Documentation}
\mbox{\label{group__FLASH__Group2_ga2aee006e5f4db4280bdedd401dfa50f9}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors@{F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors}}
\index{F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors@{F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Erase\+All\+Sectors (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{Voltage\+Range }\end{DoxyParamCaption})}



Erases all F\+L\+A\+SH Sectors. 


\begin{DoxyParams}{Parameters}
{\em Voltage\+Range} & The device voltage range which defines the erase parallelism. This parameter can be one of the following values\+: \begin{DoxyItemize}
\item Voltage\+Range\+\_\+1\+: when the device voltage range is 1.\+8V to 2.\+1V, the operation will be done by byte (8-\/bit) \item Voltage\+Range\+\_\+2\+: when the device voltage range is 2.\+1V to 2.\+7V, the operation will be done by half word (16-\/bit) \item Voltage\+Range\+\_\+3\+: when the device voltage range is 2.\+7V to 3.\+6V, the operation will be done by word (32-\/bit) \item Voltage\+Range\+\_\+4\+: when the device voltage range is 2.\+7V to 3.\+6V + External Vpp, the operation will be done by double word (64-\/bit)\end{DoxyItemize}
\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 406} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00407 \{
00408   uint32\_t tmp\_psize = 0x0;
00409   FLASH_Status status = FLASH_COMPLETE;
00410   
00411   \textcolor{comment}{/* Wait for last operation to be completed */}
00412   status = FLASH_WaitForLastOperation();
00413   assert_param(IS_VOLTAGERANGE(VoltageRange));
00414   
00415   \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_1)
00416   \{
00417      tmp\_psize = FLASH_PSIZE_BYTE;
00418   \}
00419   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_2)
00420   \{
00421     tmp\_psize = FLASH_PSIZE_HALF_WORD;
00422   \}
00423   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_3)
00424   \{
00425     tmp\_psize = FLASH_PSIZE_WORD;
00426   \}
00427   \textcolor{keywordflow}{else}
00428   \{
00429     tmp\_psize = FLASH_PSIZE_DOUBLE_WORD;
00430   \}  
00431   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00432   \{
00433     \textcolor{comment}{/* if the previous operation is completed, proceed to erase all sectors */}
00434      FLASH->CR &= CR_PSIZE_MASK;
00435      FLASH->CR |= tmp\_psize;
00436      FLASH->CR |= FLASH_CR_MER;
00437      FLASH->CR |= FLASH_CR_STRT;
00438     
00439     \textcolor{comment}{/* Wait for last operation to be completed */}
00440     status = FLASH_WaitForLastOperation();
00441 
00442     \textcolor{comment}{/* if the erase operation is completed, disable the MER Bit */}
00443     FLASH->CR &= (~FLASH_CR_MER);
00444 
00445   \}   
00446   \textcolor{comment}{/* Return the Erase Status */}
00447   \textcolor{keywordflow}{return} status;
00448 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_ga48f408290b32a3aebbcad83a00fc447c}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Erase\+Sector@{F\+L\+A\+S\+H\+\_\+\+Erase\+Sector}}
\index{F\+L\+A\+S\+H\+\_\+\+Erase\+Sector@{F\+L\+A\+S\+H\+\_\+\+Erase\+Sector}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Erase\+Sector()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Erase\+Sector (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{F\+L\+A\+S\+H\+\_\+\+Sector,  }\item[{uint8\+\_\+t}]{Voltage\+Range }\end{DoxyParamCaption})}



Erases a specified F\+L\+A\+SH Sector. 


\begin{DoxyParams}{Parameters}
{\em F\+L\+A\+S\+H\+\_\+\+Sector} & The Sector number to be erased. This parameter can be a value between F\+L\+A\+S\+H\+\_\+\+Sector\+\_\+0 and F\+L\+A\+S\+H\+\_\+\+Sector\+\_\+11\\
\hline
{\em Voltage\+Range} & The device voltage range which defines the erase parallelism. This parameter can be one of the following values\+: \begin{DoxyItemize}
\item Voltage\+Range\+\_\+1\+: when the device voltage range is 1.\+8V to 2.\+1V, the operation will be done by byte (8-\/bit) \item Voltage\+Range\+\_\+2\+: when the device voltage range is 2.\+1V to 2.\+7V, the operation will be done by half word (16-\/bit) \item Voltage\+Range\+\_\+3\+: when the device voltage range is 2.\+7V to 3.\+6V, the operation will be done by word (32-\/bit) \item Voltage\+Range\+\_\+4\+: when the device voltage range is 2.\+7V to 3.\+6V + External Vpp, the operation will be done by double word (64-\/bit)\end{DoxyItemize}
\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 341} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00342 \{
00343   uint32\_t tmp\_psize = 0x0;
00344   FLASH_Status status = FLASH_COMPLETE;
00345 
00346   \textcolor{comment}{/* Check the parameters */}
00347   assert_param(IS_FLASH_SECTOR(FLASH\_Sector));
00348   assert_param(IS_VOLTAGERANGE(VoltageRange));
00349   
00350   \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_1)
00351   \{
00352      tmp\_psize = FLASH_PSIZE_BYTE;
00353   \}
00354   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_2)
00355   \{
00356     tmp\_psize = FLASH_PSIZE_HALF_WORD;
00357   \}
00358   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(VoltageRange == VoltageRange_3)
00359   \{
00360     tmp\_psize = FLASH_PSIZE_WORD;
00361   \}
00362   \textcolor{keywordflow}{else}
00363   \{
00364     tmp\_psize = FLASH_PSIZE_DOUBLE_WORD;
00365   \}
00366   \textcolor{comment}{/* Wait for last operation to be completed */}
00367   status = FLASH_WaitForLastOperation();
00368   
00369   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00370   \{ 
00371     \textcolor{comment}{/* if the previous operation is completed, proceed to erase the sector */}
00372     FLASH->CR &= CR_PSIZE_MASK;
00373     FLASH->CR |= tmp\_psize;
00374     FLASH->CR &= SECTOR_MASK;
00375     FLASH->CR |= FLASH_CR_SER | FLASH\_Sector;
00376     FLASH->CR |= FLASH_CR_STRT;
00377     
00378     \textcolor{comment}{/* Wait for last operation to be completed */}
00379     status = FLASH_WaitForLastOperation();
00380     
00381     \textcolor{comment}{/* if the erase operation is completed, disable the SER Bit */}
00382     FLASH->CR &= (~FLASH_CR_SER);
00383     FLASH->CR &= SECTOR_MASK; 
00384   \}
00385   \textcolor{comment}{/* Return the Erase Status */}
00386   \textcolor{keywordflow}{return} status;
00387 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_ga46899557353c4312ddbe3f25e65df1d8}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Lock@{F\+L\+A\+S\+H\+\_\+\+Lock}}
\index{F\+L\+A\+S\+H\+\_\+\+Lock@{F\+L\+A\+S\+H\+\_\+\+Lock}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Lock()}
{\footnotesize\ttfamily void F\+L\+A\+S\+H\+\_\+\+Lock (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Locks the F\+L\+A\+SH control register access. 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 315} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.


\begin{DoxyCode}
00316 \{
00317   \textcolor{comment}{/* Set the LOCK Bit to lock the FLASH Registers access */}
00318   FLASH->CR |= FLASH_CR_LOCK;
00319 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_gac425adf52fe7f229ef6bb893fe386848}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Program\+Byte@{F\+L\+A\+S\+H\+\_\+\+Program\+Byte}}
\index{F\+L\+A\+S\+H\+\_\+\+Program\+Byte@{F\+L\+A\+S\+H\+\_\+\+Program\+Byte}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Program\+Byte()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Program\+Byte (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{Address,  }\item[{uint8\+\_\+t}]{Data }\end{DoxyParamCaption})}



Programs a byte (8-\/bit) at a specified address. 

\begin{DoxyNote}{Note}
This function can be used within all the device supply voltage ranges. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Address} & specifies the address to be programmed. This parameter can be any address in Program memory zone or in O\+TP zone. \\
\hline
{\em Data} & specifies the data to be programmed. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 573} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00574 \{
00575   FLASH_Status status = FLASH_COMPLETE;
00576 
00577   \textcolor{comment}{/* Check the parameters */}
00578   assert_param(IS_FLASH_ADDRESS(Address));
00579 
00580   \textcolor{comment}{/* Wait for last operation to be completed */}
00581   status = FLASH_WaitForLastOperation();
00582   
00583   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00584   \{
00585     \textcolor{comment}{/* if the previous operation is completed, proceed to program the new data */}
00586     FLASH->CR &= CR_PSIZE_MASK;
00587     FLASH->CR |= FLASH_PSIZE_BYTE;
00588     FLASH->CR |= FLASH_CR_PG;
00589   
00590     *(\_\_IO uint8\_t*)Address = Data;
00591         
00592     \textcolor{comment}{/* Wait for last operation to be completed */}
00593     status = FLASH_WaitForLastOperation();
00594 
00595     \textcolor{comment}{/* if the program operation is completed, disable the PG Bit */}
00596     FLASH->CR &= (~FLASH_CR_PG);
00597   \} 
00598 
00599   \textcolor{comment}{/* Return the Program Status */}
00600   \textcolor{keywordflow}{return} status;
00601 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_gab84b52121e58d0dbc8ff2a92145d20f2}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word}}
\index{F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Program\+Double\+Word (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{Address,  }\item[{uint64\+\_\+t}]{Data }\end{DoxyParamCaption})}



Programs a double word (64-\/bit) at a specified address. 

\begin{DoxyNote}{Note}
This function must be used when the device voltage range is from 2.\+7V to 3.\+6V and an External Vpp is present. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Address} & specifies the address to be programmed. \\
\hline
{\em Data} & specifies the data to be programmed. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 459} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00460 \{
00461   FLASH_Status status = FLASH_COMPLETE;
00462 
00463   \textcolor{comment}{/* Check the parameters */}
00464   assert_param(IS_FLASH_ADDRESS(Address));
00465 
00466   \textcolor{comment}{/* Wait for last operation to be completed */}
00467   status = FLASH_WaitForLastOperation();
00468   
00469   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00470   \{
00471     \textcolor{comment}{/* if the previous operation is completed, proceed to program the new data */}
00472     FLASH->CR &= CR_PSIZE_MASK;
00473     FLASH->CR |= FLASH_PSIZE_DOUBLE_WORD;
00474     FLASH->CR |= FLASH_CR_PG;
00475   
00476     *(\_\_IO uint64\_t*)Address = Data;
00477         
00478     \textcolor{comment}{/* Wait for last operation to be completed */}
00479     status = FLASH_WaitForLastOperation();
00480 
00481     \textcolor{comment}{/* if the program operation is completed, disable the PG Bit */}
00482     FLASH->CR &= (~FLASH_CR_PG);
00483   \} 
00484   \textcolor{comment}{/* Return the Program Status */}
00485   \textcolor{keywordflow}{return} status;
00486 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_ga5c1336f667950a8765887228f1d0d501}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word}}
\index{F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Program\+Half\+Word (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{Address,  }\item[{uint16\+\_\+t}]{Data }\end{DoxyParamCaption})}



Programs a half word (16-\/bit) at a specified address. 

\begin{DoxyNote}{Note}
This function must be used when the device voltage range is from 2.\+1V to 3.\+6V. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Address} & specifies the address to be programmed. This parameter can be any address in Program memory zone or in O\+TP zone. \\
\hline
{\em Data} & specifies the data to be programmed. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 535} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00536 \{
00537   FLASH_Status status = FLASH_COMPLETE;
00538 
00539   \textcolor{comment}{/* Check the parameters */}
00540   assert_param(IS_FLASH_ADDRESS(Address));
00541 
00542   \textcolor{comment}{/* Wait for last operation to be completed */}
00543   status = FLASH_WaitForLastOperation();
00544   
00545   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00546   \{
00547     \textcolor{comment}{/* if the previous operation is completed, proceed to program the new data */}
00548     FLASH->CR &= CR_PSIZE_MASK;
00549     FLASH->CR |= FLASH_PSIZE_HALF_WORD;
00550     FLASH->CR |= FLASH_CR_PG;
00551   
00552     *(\_\_IO uint16\_t*)Address = Data;
00553         
00554     \textcolor{comment}{/* Wait for last operation to be completed */}
00555     status = FLASH_WaitForLastOperation();
00556 
00557     \textcolor{comment}{/* if the program operation is completed, disable the PG Bit */}
00558     FLASH->CR &= (~FLASH_CR_PG);
00559   \} 
00560   \textcolor{comment}{/* Return the Program Status */}
00561   \textcolor{keywordflow}{return} status;
00562 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_gaac9a2f400b92537bd42a6bd7cc237b11}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Program\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Word}}
\index{F\+L\+A\+S\+H\+\_\+\+Program\+Word@{F\+L\+A\+S\+H\+\_\+\+Program\+Word}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Program\+Word()}
{\footnotesize\ttfamily \textbf{ F\+L\+A\+S\+H\+\_\+\+Status} F\+L\+A\+S\+H\+\_\+\+Program\+Word (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{Address,  }\item[{uint32\+\_\+t}]{Data }\end{DoxyParamCaption})}



Programs a word (32-\/bit) at a specified address. 


\begin{DoxyParams}{Parameters}
{\em Address} & specifies the address to be programmed. This parameter can be any address in Program memory zone or in O\+TP zone. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function must be used when the device voltage range is from 2.\+7V to 3.\+6V. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Data} & specifies the data to be programmed. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+SH} & Status\+: The returned value can be\+: F\+L\+A\+S\+H\+\_\+\+B\+U\+SY, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+R\+O\+G\+R\+AM, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+W\+RP, F\+L\+A\+S\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+O\+P\+E\+R\+A\+T\+I\+ON or F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 497} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.



References \textbf{ F\+L\+A\+S\+H\+\_\+\+C\+O\+M\+P\+L\+E\+TE}, and \textbf{ F\+L\+A\+S\+H\+\_\+\+Wait\+For\+Last\+Operation()}.


\begin{DoxyCode}
00498 \{
00499   FLASH_Status status = FLASH_COMPLETE;
00500 
00501   \textcolor{comment}{/* Check the parameters */}
00502   assert_param(IS_FLASH_ADDRESS(Address));
00503 
00504   \textcolor{comment}{/* Wait for last operation to be completed */}
00505   status = FLASH_WaitForLastOperation();
00506   
00507   \textcolor{keywordflow}{if}(status == FLASH_COMPLETE)
00508   \{
00509     \textcolor{comment}{/* if the previous operation is completed, proceed to program the new data */}
00510     FLASH->CR &= CR_PSIZE_MASK;
00511     FLASH->CR |= FLASH_PSIZE_WORD;
00512     FLASH->CR |= FLASH_CR_PG;
00513   
00514     *(\_\_IO uint32\_t*)Address = Data;
00515         
00516     \textcolor{comment}{/* Wait for last operation to be completed */}
00517     status = FLASH_WaitForLastOperation();
00518 
00519     \textcolor{comment}{/* if the program operation is completed, disable the PG Bit */}
00520     FLASH->CR &= (~FLASH_CR_PG);
00521   \} 
00522   \textcolor{comment}{/* Return the Program Status */}
00523   \textcolor{keywordflow}{return} status;
00524 \}
\end{DoxyCode}
\mbox{\label{group__FLASH__Group2_ga4084d0184bab463a1579271bf474aaef}} 
\index{F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}!F\+L\+A\+S\+H\+\_\+\+Unlock@{F\+L\+A\+S\+H\+\_\+\+Unlock}}
\index{F\+L\+A\+S\+H\+\_\+\+Unlock@{F\+L\+A\+S\+H\+\_\+\+Unlock}!F\+L\+A\+S\+H Memory Programming functions@{F\+L\+A\+S\+H Memory Programming functions}}
\subsubsection{F\+L\+A\+S\+H\+\_\+\+Unlock()}
{\footnotesize\ttfamily void F\+L\+A\+S\+H\+\_\+\+Unlock (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Unlocks the F\+L\+A\+SH control register access. 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 300} of file \textbf{ stm32f4xx\+\_\+flash.\+c}.


\begin{DoxyCode}
00301 \{
00302   \textcolor{keywordflow}{if}((FLASH->CR & FLASH_CR_LOCK) != RESET)
00303   \{
00304     \textcolor{comment}{/* Authorize the FLASH Registers access */}
00305     FLASH->KEYR = FLASH_KEY1;
00306     FLASH->KEYR = FLASH_KEY2;
00307   \}  
00308 \}
\end{DoxyCode}
