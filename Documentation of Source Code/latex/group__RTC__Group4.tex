\section{Wake\+Up Timer configuration functions}
\label{group__RTC__Group4}\index{Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}}


Wake\+Up Timer configuration functions.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config} (uint32\+\_\+t R\+T\+C\+\_\+\+Wake\+Up\+Clock)
\begin{DoxyCompactList}\small\item\em Configures the R\+TC Wakeup clock source. \end{DoxyCompactList}\item 
void \textbf{ R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter} (uint32\+\_\+t R\+T\+C\+\_\+\+Wake\+Up\+Counter)
\begin{DoxyCompactList}\small\item\em Configures the R\+TC Wakeup counter. \end{DoxyCompactList}\item 
uint32\+\_\+t \textbf{ R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter} (void)
\begin{DoxyCompactList}\small\item\em Returns the R\+TC Wake\+Up timer counter value. \end{DoxyCompactList}\item 
\textbf{ Error\+Status} \textbf{ R\+T\+C\+\_\+\+Wake\+Up\+Cmd} (\textbf{ Functional\+State} New\+State)
\begin{DoxyCompactList}\small\item\em Enables or Disables the R\+TC Wake\+Up timer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Wake\+Up Timer configuration functions. 

\begin{DoxyVerb} ===============================================================================
                     WakeUp Timer configuration functions
 ===============================================================================  

  This section provide functions allowing to program and read the RTC WakeUp.\end{DoxyVerb}
 

\subsection{Function Documentation}
\mbox{\label{group__RTC__Group4_gae63aab672e917cc48e298162c3dec049}} 
\index{Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}!R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter@{R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter}}
\index{R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter@{R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter}!Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}}
\subsubsection{R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter()}
{\footnotesize\ttfamily uint32\+\_\+t R\+T\+C\+\_\+\+Get\+Wake\+Up\+Counter (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Returns the R\+TC Wake\+Up timer counter value. 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em The} & R\+TC Wake\+Up Counter value. \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 1515} of file \textbf{ stm32f4xx\+\_\+rtc.\+c}.


\begin{DoxyCode}
01516 \{
01517   \textcolor{comment}{/* Get the counter value */}
01518   \textcolor{keywordflow}{return} ((uint32\_t)(RTC->WUTR & RTC_WUTR_WUT));
01519 \}
\end{DoxyCode}
\mbox{\label{group__RTC__Group4_ga1412044eb756a166c1cf341f3d46ed6b}} 
\index{Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}!R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter@{R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter}}
\index{R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter@{R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter}!Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}}
\subsubsection{R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter()}
{\footnotesize\ttfamily void R\+T\+C\+\_\+\+Set\+Wake\+Up\+Counter (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{R\+T\+C\+\_\+\+Wake\+Up\+Counter }\end{DoxyParamCaption})}



Configures the R\+TC Wakeup counter. 

\begin{DoxyNote}{Note}
The R\+TC Wake\+Up counter can only be written when the R\+TC Wake\+Up is disabled (Use the R\+T\+C\+\_\+\+Wake\+Up\+Cmd(\+D\+I\+S\+A\+B\+L\+E)). 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em R\+T\+C\+\_\+\+Wake\+Up\+Counter} & specifies the Wake\+Up counter. This parameter can be a value from 0x0000 to 0x\+F\+F\+FF. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 1494} of file \textbf{ stm32f4xx\+\_\+rtc.\+c}.


\begin{DoxyCode}
01495 \{
01496   \textcolor{comment}{/* Check the parameters */}
01497   assert_param(IS_RTC_WAKEUP_COUNTER(RTC\_WakeUpCounter));
01498   
01499   \textcolor{comment}{/* Disable the write protection for RTC registers */}
01500   RTC->WPR = 0xCA;
01501   RTC->WPR = 0x53;
01502   
01503   \textcolor{comment}{/* Configure the Wakeup Timer counter */}
01504   RTC->WUTR = (uint32\_t)RTC\_WakeUpCounter;
01505   
01506   \textcolor{comment}{/* Enable the write protection for RTC registers */}
01507   RTC->WPR = 0xFF; 
01508 \}
\end{DoxyCode}
\mbox{\label{group__RTC__Group4_ga2557b02b318211112731a91a190c4b26}} 
\index{Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}!R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config@{R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config}}
\index{R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config@{R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config}!Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}}
\subsubsection{R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config()}
{\footnotesize\ttfamily void R\+T\+C\+\_\+\+Wake\+Up\+Clock\+Config (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{R\+T\+C\+\_\+\+Wake\+Up\+Clock }\end{DoxyParamCaption})}



Configures the R\+TC Wakeup clock source. 

\begin{DoxyNote}{Note}
The Wake\+Up Clock source can only be changed when the R\+TC Wake\+Up is disabled (Use the R\+T\+C\+\_\+\+Wake\+Up\+Cmd(\+D\+I\+S\+A\+B\+L\+E)). 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em R\+T\+C\+\_\+\+Wake\+Up\+Clock} & Wakeup Clock source. This parameter can be one of the following values\+: \begin{DoxyItemize}
\item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+R\+T\+C\+C\+L\+K\+\_\+\+Div16\+: R\+TC Wakeup Counter Clock = R\+T\+C\+C\+L\+K/16 \item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+R\+T\+C\+C\+L\+K\+\_\+\+Div8\+: R\+TC Wakeup Counter Clock = R\+T\+C\+C\+L\+K/8 \item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+R\+T\+C\+C\+L\+K\+\_\+\+Div4\+: R\+TC Wakeup Counter Clock = R\+T\+C\+C\+L\+K/4 \item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+R\+T\+C\+C\+L\+K\+\_\+\+Div2\+: R\+TC Wakeup Counter Clock = R\+T\+C\+C\+L\+K/2 \item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+C\+K\+\_\+\+S\+P\+R\+E\+\_\+16bits\+: R\+TC Wakeup Counter Clock = C\+K\+\_\+\+S\+P\+RE \item R\+T\+C\+\_\+\+Wake\+Up\+Clock\+\_\+\+C\+K\+\_\+\+S\+P\+R\+E\+\_\+17bits\+: R\+TC Wakeup Counter Clock = C\+K\+\_\+\+S\+P\+RE \end{DoxyItemize}
\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 1467} of file \textbf{ stm32f4xx\+\_\+rtc.\+c}.


\begin{DoxyCode}
01468 \{
01469   \textcolor{comment}{/* Check the parameters */}
01470   assert_param(IS_RTC_WAKEUP_CLOCK(RTC\_WakeUpClock));
01471 
01472   \textcolor{comment}{/* Disable the write protection for RTC registers */}
01473   RTC->WPR = 0xCA;
01474   RTC->WPR = 0x53;
01475 
01476   \textcolor{comment}{/* Clear the Wakeup Timer clock source bits in CR register */}
01477   RTC->CR &= (uint32\_t)~RTC_CR_WUCKSEL;
01478 
01479   \textcolor{comment}{/* Configure the clock source */}
01480   RTC->CR |= (uint32\_t)RTC\_WakeUpClock;
01481   
01482   \textcolor{comment}{/* Enable the write protection for RTC registers */}
01483   RTC->WPR = 0xFF; 
01484 \}
\end{DoxyCode}
\mbox{\label{group__RTC__Group4_ga2ce05293303e0d7879c6d755c5355b4c}} 
\index{Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}!R\+T\+C\+\_\+\+Wake\+Up\+Cmd@{R\+T\+C\+\_\+\+Wake\+Up\+Cmd}}
\index{R\+T\+C\+\_\+\+Wake\+Up\+Cmd@{R\+T\+C\+\_\+\+Wake\+Up\+Cmd}!Wake\+Up Timer configuration functions@{Wake\+Up Timer configuration functions}}
\subsubsection{R\+T\+C\+\_\+\+Wake\+Up\+Cmd()}
{\footnotesize\ttfamily \textbf{ Error\+Status} R\+T\+C\+\_\+\+Wake\+Up\+Cmd (\begin{DoxyParamCaption}\item[{\textbf{ Functional\+State}}]{New\+State }\end{DoxyParamCaption})}



Enables or Disables the R\+TC Wake\+Up timer. 


\begin{DoxyParams}{Parameters}
{\em New\+State} & new state of the Wake\+Up timer. This parameter can be\+: E\+N\+A\+B\+LE or D\+I\+S\+A\+B\+LE. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line \textbf{ 1527} of file \textbf{ stm32f4xx\+\_\+rtc.\+c}.



References \textbf{ D\+I\+S\+A\+B\+LE}, \textbf{ E\+R\+R\+OR}, and \textbf{ S\+U\+C\+C\+E\+SS}.


\begin{DoxyCode}
01528 \{
01529   \_\_IO uint32\_t wutcounter = 0x00;
01530   uint32\_t wutwfstatus = 0x00;
01531   ErrorStatus status = ERROR;
01532   
01533   \textcolor{comment}{/* Check the parameters */}
01534   assert_param(IS_FUNCTIONAL_STATE(NewState));
01535 
01536   \textcolor{comment}{/* Disable the write protection for RTC registers */}
01537   RTC->WPR = 0xCA;
01538   RTC->WPR = 0x53;
01539 
01540   \textcolor{keywordflow}{if} (NewState != DISABLE)
01541   \{
01542     \textcolor{comment}{/* Enable the Wakeup Timer */}
01543     RTC->CR |= (uint32\_t)RTC_CR_WUTE;
01544     status = SUCCESS;    
01545   \}
01546   \textcolor{keywordflow}{else}
01547   \{
01548     \textcolor{comment}{/* Disable the Wakeup Timer */}
01549     RTC->CR &= (uint32\_t)~RTC_CR_WUTE;
01550     \textcolor{comment}{/* Wait till RTC WUTWF flag is set and if Time out is reached exit */}
01551     \textcolor{keywordflow}{do}
01552     \{
01553       wutwfstatus = RTC->ISR & RTC_ISR_WUTWF;
01554       wutcounter++;  
01555     \} \textcolor{keywordflow}{while}((wutcounter != INITMODE_TIMEOUT) && (wutwfstatus == 0x00));
01556     
01557     \textcolor{keywordflow}{if} ((RTC->ISR & RTC_ISR_WUTWF) == RESET)
01558     \{
01559       status = ERROR;
01560     \}
01561     \textcolor{keywordflow}{else}
01562     \{
01563       status = SUCCESS;
01564     \}    
01565   \}
01566 
01567   \textcolor{comment}{/* Enable the write protection for RTC registers */}
01568   RTC->WPR = 0xFF; 
01569   
01570   \textcolor{keywordflow}{return} status;
01571 \}
\end{DoxyCode}
