<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Document Of Source Code: Interrupts events and flags management functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Document Of Source Code
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Interrupts events and flags management functions<div class="ingroups"><a class="el" href="group__STM32F4xx__StdPeriph__Driver.html">STM32F4xx_StdPeriph_Driver</a> &raquo; <a class="el" href="group__I2C.html">I2C</a> &raquo; <a class="el" href="group__I2C__Private__Functions.html">I2C_Private_Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Interrupts, events and flags management functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8021dc796d15f997356b0583d6346805"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga8021dc796d15f997356b0583d6346805">I2C_ReadRegister</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint8_t I2C_Register)</td></tr>
<tr class="memdesc:ga8021dc796d15f997356b0583d6346805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the specified I2C register and returns its value.  <a href="#ga8021dc796d15f997356b0583d6346805">More...</a><br /></td></tr>
<tr class="separator:ga8021dc796d15f997356b0583d6346805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58fed146a06cb81d2940604e460de047"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga58fed146a06cb81d2940604e460de047">I2C_ITConfig</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint16_t I2C_IT, <a class="el" href="group__Exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState)</td></tr>
<tr class="memdesc:ga58fed146a06cb81d2940604e460de047"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables or disables the specified I2C interrupts.  <a href="#ga58fed146a06cb81d2940604e460de047">More...</a><br /></td></tr>
<tr class="separator:ga58fed146a06cb81d2940604e460de047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d5701342f9d4c1f09bf9d3cdcacc326"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Exported__types.html#ga8333b96c67f83cba354b3407fcbb6ee8">ErrorStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga2d5701342f9d4c1f09bf9d3cdcacc326">I2C_CheckEvent</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint32_t I2C_EVENT)</td></tr>
<tr class="memdesc:ga2d5701342f9d4c1f09bf9d3cdcacc326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the last I2Cx Event is equal to the one passed as parameter.  <a href="#ga2d5701342f9d4c1f09bf9d3cdcacc326">More...</a><br /></td></tr>
<tr class="separator:ga2d5701342f9d4c1f09bf9d3cdcacc326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29237aea9b5a3ead33167e1d027e9f1a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga29237aea9b5a3ead33167e1d027e9f1a">I2C_GetLastEvent</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx)</td></tr>
<tr class="memdesc:ga29237aea9b5a3ead33167e1d027e9f1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last I2Cx Event.  <a href="#ga29237aea9b5a3ead33167e1d027e9f1a">More...</a><br /></td></tr>
<tr class="separator:ga29237aea9b5a3ead33167e1d027e9f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15c95d0ed124f029621a2061b1677ee7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7">I2C_GetFlagStatus</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint32_t I2C_FLAG)</td></tr>
<tr class="memdesc:ga15c95d0ed124f029621a2061b1677ee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the specified I2C flag is set or not.  <a href="#ga15c95d0ed124f029621a2061b1677ee7">More...</a><br /></td></tr>
<tr class="separator:ga15c95d0ed124f029621a2061b1677ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d4f8fe9f7232696114b5578b1223963"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga9d4f8fe9f7232696114b5578b1223963">I2C_ClearFlag</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint32_t I2C_FLAG)</td></tr>
<tr class="memdesc:ga9d4f8fe9f7232696114b5578b1223963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the I2Cx's pending flags.  <a href="#ga9d4f8fe9f7232696114b5578b1223963">More...</a><br /></td></tr>
<tr class="separator:ga9d4f8fe9f7232696114b5578b1223963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga447771fbbd94a56f3570b9f430a069ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba">I2C_GetITStatus</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint32_t I2C_IT)</td></tr>
<tr class="memdesc:ga447771fbbd94a56f3570b9f430a069ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the specified I2C interrupt has occurred or not.  <a href="#ga447771fbbd94a56f3570b9f430a069ba">More...</a><br /></td></tr>
<tr class="separator:ga447771fbbd94a56f3570b9f430a069ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga110dda440fa200b5f77349df19b3e6bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Group5.html#ga110dda440fa200b5f77349df19b3e6bb">I2C_ClearITPendingBit</a> (<a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *I2Cx, uint32_t I2C_IT)</td></tr>
<tr class="memdesc:ga110dda440fa200b5f77349df19b3e6bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the I2Cx's interrupt pending bits.  <a href="#ga110dda440fa200b5f77349df19b3e6bb">More...</a><br /></td></tr>
<tr class="separator:ga110dda440fa200b5f77349df19b3e6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Interrupts, events and flags management functions. </p>
<pre class="fragment"> ===============================================================================
                Interrupts, events and flags management functions
 ===============================================================================  
  This section provides functions allowing to configure the I2C Interrupts 
  sources and check or clear the flags or pending bits status.
  The user should identify which mode will be used in his application to manage 
  the communication: Polling mode, Interrupt mode or DMA mode. 

 ===============================================================================
                          I2C State Monitoring Functions                    
 ===============================================================================   
  This I2C driver provides three different ways for I2C state monitoring
  depending on the application requirements and constraints:
         
   
     1. Basic state monitoring (Using I2C_CheckEvent() function)
     -----------------------------------------------------------
        It compares the status registers (SR1 and SR2) content to a given event
        (can be the combination of one or more flags).
        It returns SUCCESS if the current status includes the given flags 
        and returns ERROR if one or more flags are missing in the current status.

          - When to use
             - This function is suitable for most applications as well as for startup 
               activity since the events are fully described in the product reference 
               manual (RM0090).
             - It is also suitable for users who need to define their own events.

          - Limitations
             - If an error occurs (ie. error flags are set besides to the monitored 
               flags), the I2C_CheckEvent() function may return SUCCESS despite 
               the communication hold or corrupted real state. 
               In this case, it is advised to use error interrupts to monitor 
               the error events and handle them in the interrupt IRQ handler.
         
     @note 
         For error management, it is advised to use the following functions:
           - I2C_ITConfig() to configure and enable the error interrupts (I2C_IT_ERR).
           - I2Cx_ER_IRQHandler() which is called when the error interrupt occurs.
             Where x is the peripheral instance (I2C1, I2C2 ...)
           - I2C_GetFlagStatus() or I2C_GetITStatus()  to be called into the 
             I2Cx_ER_IRQHandler() function in order to determine which error occurred.
           - I2C_ClearFlag() or I2C_ClearITPendingBit() and/or I2C_SoftwareResetCmd() 
             and/or I2C_GenerateStop() in order to clear the error flag and source 
             and return to correct  communication status.
             
 
     2. Advanced state monitoring (Using the function I2C_GetLastEvent())
     -------------------------------------------------------------------- 
        Using the function I2C_GetLastEvent() which returns the image of both status 
        registers in a single word (uint32_t) (Status Register 2 value is shifted left 
        by 16 bits and concatenated to Status Register 1).

          - When to use
             - This function is suitable for the same applications above but it 
               allows to overcome the mentioned limitation of I2C_GetFlagStatus() 
               function.
             - The returned value could be compared to events already defined in 
               the library (stm32f4xx_i2c.h) or to custom values defined by user.
               This function is suitable when multiple flags are monitored at the 
               same time.
             - At the opposite of I2C_CheckEvent() function, this function allows 
               user to choose when an event is accepted (when all events flags are 
               set and no other flags are set or just when the needed flags are set 
               like I2C_CheckEvent() function.

          - Limitations
             - User may need to define his own events.
             - Same remark concerning the error management is applicable for this 
               function if user decides to check only regular communication flags 
               (and ignores error flags).
      
 
     3. Flag-based state monitoring (Using the function I2C_GetFlagStatus())
     -----------------------------------------------------------------------
     
      Using the function I2C_GetFlagStatus() which simply returns the status of 
      one single flag (ie. I2C_FLAG_RXNE ...). 

          - When to use
             - This function could be used for specific applications or in debug 
               phase.
             - It is suitable when only one flag checking is needed (most I2C 
               events are monitored through multiple flags).
          - Limitations: 
             - When calling this function, the Status register is accessed. 
               Some flags are cleared when the status register is accessed. 
               So checking the status of one Flag, may clear other ones.
             - Function may need to be called twice or more in order to monitor 
               one single event.
 
   For detailed description of Events, please refer to section I2C_Events in 
   stm32f4xx_i2c.h file.</pre> <h2 class="groupheader">Function Documentation</h2>
<a id="ga2d5701342f9d4c1f09bf9d3cdcacc326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d5701342f9d4c1f09bf9d3cdcacc326">&#9670;&nbsp;</a></span>I2C_CheckEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Exported__types.html#ga8333b96c67f83cba354b3407fcbb6ee8">ErrorStatus</a> I2C_CheckEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>I2C_EVENT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the last I2Cx Event is equal to the one passed as parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_EVENT</td><td>specifies the event to be checked. This parameter can be one of the following values: <ul>
<li>I2C_EVENT_SLAVE_TRANSMITTER_ADDRESS_MATCHED: EV1 </li>
<li>I2C_EVENT_SLAVE_RECEIVER_ADDRESS_MATCHED: EV1 </li>
<li>I2C_EVENT_SLAVE_TRANSMITTER_SECONDADDRESS_MATCHED: EV1 </li>
<li>I2C_EVENT_SLAVE_RECEIVER_SECONDADDRESS_MATCHED: EV1 </li>
<li>I2C_EVENT_SLAVE_GENERALCALLADDRESS_MATCHED: EV1 </li>
<li>I2C_EVENT_SLAVE_BYTE_RECEIVED: EV2 </li>
<li>(I2C_EVENT_SLAVE_BYTE_RECEIVED | I2C_FLAG_DUALF): EV2 </li>
<li>(I2C_EVENT_SLAVE_BYTE_RECEIVED | I2C_FLAG_GENCALL): EV2 </li>
<li>I2C_EVENT_SLAVE_BYTE_TRANSMITTED: EV3 </li>
<li>(I2C_EVENT_SLAVE_BYTE_TRANSMITTED | I2C_FLAG_DUALF): EV3 </li>
<li>(I2C_EVENT_SLAVE_BYTE_TRANSMITTED | I2C_FLAG_GENCALL): EV3 </li>
<li>I2C_EVENT_SLAVE_ACK_FAILURE: EV3_2 </li>
<li>I2C_EVENT_SLAVE_STOP_DETECTED: EV4 </li>
<li>I2C_EVENT_MASTER_MODE_SELECT: EV5 </li>
<li>I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED: EV6 </li>
<li>I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED: EV6 </li>
<li>I2C_EVENT_MASTER_BYTE_RECEIVED: EV7 </li>
<li>I2C_EVENT_MASTER_BYTE_TRANSMITTING: EV8 </li>
<li>I2C_EVENT_MASTER_BYTE_TRANSMITTED: EV8_2 </li>
<li>I2C_EVENT_MASTER_MODE_ADDRESS10: EV9</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For detailed description of Events, please refer to section I2C_Events in <a class="el" href="stm32f4xx__i2c_8h.html" title="This file contains all the functions prototypes for the I2C firmware library. ">stm32f4xx_i2c.h</a> file.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">An</td><td>ErrorStatus enumeration value:<ul>
<li>SUCCESS: Last event is equal to the I2C_EVENT</li>
<li>ERROR: Last event is different from the I2C_EVENT </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01091">1091</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f4xx_8h_source.html#l00292">ERROR</a>, and <a class="el" href="stm32f4xx_8h_source.html#l00292">SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;{</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  uint32_t lastevent = 0;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  uint32_t flag1 = 0, flag2 = 0;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="group__Exported__types.html#ga8333b96c67f83cba354b3407fcbb6ee8">ErrorStatus</a> status = <a class="code" href="group__Exported__types.html#gga8333b96c67f83cba354b3407fcbb6ee8a2fd6f336d08340583bd620a7f5694c90">ERROR</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Events.html#ga4b42e6936006195f89ff4f763d366970">IS_I2C_EVENT</a>(I2C_EVENT));</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">/* Read the I2Cx status register */</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  flag1 = I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">SR1</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  flag2 = I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a682809d3f8187cdefb9d615e89b67e65">SR2</a>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  flag2 = flag2 &lt;&lt; 16;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">/* Get the last event value from I2C status register */</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  lastevent = (flag1 | flag2) &amp; <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">/* Check whether the last event contains the I2C_EVENT */</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">if</span> ((lastevent &amp; I2C_EVENT) == I2C_EVENT)</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">/* SUCCESS: last event is equal to I2C_EVENT */</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    status = <a class="code" href="group__Exported__types.html#gga8333b96c67f83cba354b3407fcbb6ee8ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">/* ERROR: last event is different from I2C_EVENT */</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    status = <a class="code" href="group__Exported__types.html#gga8333b96c67f83cba354b3407fcbb6ee8a2fd6f336d08340583bd620a7f5694c90">ERROR</a>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">/* Return status */</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">return</span> status;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__I2C__Events_html_ga4b42e6936006195f89ff4f763d366970"><div class="ttname"><a href="group__I2C__Events.html#ga4b42e6936006195f89ff4f763d366970">IS_I2C_EVENT</a></div><div class="ttdeci">#define IS_I2C_EVENT(EVENT)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00481">stm32f4xx_i2c.h:481</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga8333b96c67f83cba354b3407fcbb6ee8ac7f69f7c9e5aea9b8f54cf02870e2bf8"><div class="ttname"><a href="group__Exported__types.html#gga8333b96c67f83cba354b3407fcbb6ee8ac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00292">stm32f4xx.h:292</a></div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="group__Exported__types_html_ga8333b96c67f83cba354b3407fcbb6ee8"><div class="ttname"><a href="group__Exported__types.html#ga8333b96c67f83cba354b3407fcbb6ee8">ErrorStatus</a></div><div class="ttdeci">ErrorStatus</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00292">stm32f4xx.h:292</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga8333b96c67f83cba354b3407fcbb6ee8a2fd6f336d08340583bd620a7f5694c90"><div class="ttname"><a href="group__Exported__types.html#gga8333b96c67f83cba354b3407fcbb6ee8a2fd6f336d08340583bd620a7f5694c90">ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00292">stm32f4xx.h:292</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a682809d3f8187cdefb9d615e89b67e65"><div class="ttname"><a href="structI2C__TypeDef.html#a682809d3f8187cdefb9d615e89b67e65">I2C_TypeDef::SR2</a></div><div class="ttdeci">__IO uint16_t SR2</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00701">stm32f4xx.h:701</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a1e79a16729e8d1032d9fe552d50dce41"><div class="ttname"><a href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">I2C_TypeDef::SR1</a></div><div class="ttdeci">__IO uint16_t SR1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00699">stm32f4xx.h:699</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9d4f8fe9f7232696114b5578b1223963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d4f8fe9f7232696114b5578b1223963">&#9670;&nbsp;</a></span>I2C_ClearFlag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_ClearFlag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>I2C_FLAG</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the I2Cx's pending flags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_FLAG</td><td>specifies the flag to clear. This parameter can be any combination of the following values: <ul>
<li>I2C_FLAG_SMBALERT: SMBus Alert flag </li>
<li>I2C_FLAG_TIMEOUT: Timeout or Tlow error flag </li>
<li>I2C_FLAG_PECERR: PEC error in reception flag </li>
<li>I2C_FLAG_OVR: Overrun/Underrun flag (Slave mode) </li>
<li>I2C_FLAG_AF: Acknowledge failure flag </li>
<li>I2C_FLAG_ARLO: Arbitration lost flag (Master mode) </li>
<li>I2C_FLAG_BERR: Bus error flag</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>STOPF (STOP detection) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7" title="Checks whether the specified I2C flag is set or not. ">I2C_GetFlagStatus()</a>) followed by a write operation to I2C_CR1 register (<a class="el" href="group__I2C__Group1.html#ga7e1323c9133c2cb424dfb5b10b7d2f0b" title="Enables or disables the specified I2C peripheral. ">I2C_Cmd()</a> to re-enable the I2C peripheral). </dd>
<dd>
ADD10 (10-bit header sent) is cleared by software sequence: a read operation to I2C_SR1 (<a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7" title="Checks whether the specified I2C flag is set or not. ">I2C_GetFlagStatus()</a>) followed by writing the second byte of the address in DR register. </dd>
<dd>
BTF (Byte Transfer Finished) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7" title="Checks whether the specified I2C flag is set or not. ">I2C_GetFlagStatus()</a>) followed by a read/write to I2C_DR register (<a class="el" href="group__I2C__Group2.html#ga7bd9e70b8eafde0dd5eb42b0d95fe1a9" title="Sends a data byte through the I2Cx peripheral. ">I2C_SendData()</a>). </dd>
<dd>
ADDR (Address sent) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7" title="Checks whether the specified I2C flag is set or not. ">I2C_GetFlagStatus()</a>) followed by a read operation to I2C_SR2 register ((void)(I2Cx-&gt;SR2)). </dd>
<dd>
SB (Start Bit) is cleared software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga15c95d0ed124f029621a2061b1677ee7" title="Checks whether the specified I2C flag is set or not. ">I2C_GetFlagStatus()</a>) followed by a write operation to I2C_DR register (<a class="el" href="group__I2C__Group2.html#ga7bd9e70b8eafde0dd5eb42b0d95fe1a9" title="Sends a data byte through the I2Cx peripheral. ">I2C_SendData()</a>).</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01271">1271</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;{</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  uint32_t flagpos = 0;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__flags__definition.html#ga66c8180841350c47627c323acfe42ee9">IS_I2C_CLEAR_FLAG</a>(I2C_FLAG));</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">/* Get the I2C flag position */</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  flagpos = I2C_FLAG &amp; <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">/* Clear the selected I2C flag */</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">SR1</a> = (uint16_t)~flagpos;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="ttc" id="group__I2C__flags__definition_html_ga66c8180841350c47627c323acfe42ee9"><div class="ttname"><a href="group__I2C__flags__definition.html#ga66c8180841350c47627c323acfe42ee9">IS_I2C_CLEAR_FLAG</a></div><div class="ttdeci">#define IS_I2C_CLEAR_FLAG(FLAG)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00282">stm32f4xx_i2c.h:282</a></div></div>
<div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a1e79a16729e8d1032d9fe552d50dce41"><div class="ttname"><a href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">I2C_TypeDef::SR1</a></div><div class="ttdeci">__IO uint16_t SR1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00699">stm32f4xx.h:699</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga110dda440fa200b5f77349df19b3e6bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga110dda440fa200b5f77349df19b3e6bb">&#9670;&nbsp;</a></span>I2C_ClearITPendingBit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_ClearITPendingBit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>I2C_IT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the I2Cx's interrupt pending bits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_IT</td><td>specifies the interrupt pending bit to clear. This parameter can be any combination of the following values: <ul>
<li>I2C_IT_SMBALERT: SMBus Alert interrupt </li>
<li>I2C_IT_TIMEOUT: Timeout or Tlow error interrupt </li>
<li>I2C_IT_PECERR: PEC error in reception interrupt </li>
<li>I2C_IT_OVR: Overrun/Underrun interrupt (Slave mode) </li>
<li>I2C_IT_AF: Acknowledge failure interrupt </li>
<li>I2C_IT_ARLO: Arbitration lost interrupt (Master mode) </li>
<li>I2C_IT_BERR: Bus error interrupt</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>STOPF (STOP detection) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba" title="Checks whether the specified I2C interrupt has occurred or not. ">I2C_GetITStatus()</a>) followed by a write operation to I2C_CR1 register (<a class="el" href="group__I2C__Group1.html#ga7e1323c9133c2cb424dfb5b10b7d2f0b" title="Enables or disables the specified I2C peripheral. ">I2C_Cmd()</a> to re-enable the I2C peripheral). </dd>
<dd>
ADD10 (10-bit header sent) is cleared by software sequence: a read operation to I2C_SR1 (<a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba" title="Checks whether the specified I2C interrupt has occurred or not. ">I2C_GetITStatus()</a>) followed by writing the second byte of the address in I2C_DR register. </dd>
<dd>
BTF (Byte Transfer Finished) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba" title="Checks whether the specified I2C interrupt has occurred or not. ">I2C_GetITStatus()</a>) followed by a read/write to I2C_DR register (<a class="el" href="group__I2C__Group2.html#ga7bd9e70b8eafde0dd5eb42b0d95fe1a9" title="Sends a data byte through the I2Cx peripheral. ">I2C_SendData()</a>). </dd>
<dd>
ADDR (Address sent) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba" title="Checks whether the specified I2C interrupt has occurred or not. ">I2C_GetITStatus()</a>) followed by a read operation to I2C_SR2 register ((void)(I2Cx-&gt;SR2)). </dd>
<dd>
SB (Start Bit) is cleared by software sequence: a read operation to I2C_SR1 register (<a class="el" href="group__I2C__Group5.html#ga447771fbbd94a56f3570b9f430a069ba" title="Checks whether the specified I2C interrupt has occurred or not. ">I2C_GetITStatus()</a>) followed by a write operation to I2C_DR register (<a class="el" href="group__I2C__Group2.html#ga7bd9e70b8eafde0dd5eb42b0d95fe1a9" title="Sends a data byte through the I2Cx peripheral. ">I2C_SendData()</a>). </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01365">1365</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;{</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  uint32_t flagpos = 0;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__interrupts__definition.html#ga368c05fc9aadd7bb4d23280791b5a751">IS_I2C_CLEAR_IT</a>(I2C_IT));</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">/* Get the I2C flag position */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  flagpos = I2C_IT &amp; <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">/* Clear the selected I2C flag */</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">SR1</a> = (uint16_t)~flagpos;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="group__I2C__interrupts__definition_html_ga368c05fc9aadd7bb4d23280791b5a751"><div class="ttname"><a href="group__I2C__interrupts__definition.html#ga368c05fc9aadd7bb4d23280791b5a751">IS_I2C_CLEAR_IT</a></div><div class="ttdeci">#define IS_I2C_CLEAR_IT(IT)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00234">stm32f4xx_i2c.h:234</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a1e79a16729e8d1032d9fe552d50dce41"><div class="ttname"><a href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">I2C_TypeDef::SR1</a></div><div class="ttdeci">__IO uint16_t SR1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00699">stm32f4xx.h:699</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga15c95d0ed124f029621a2061b1677ee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga15c95d0ed124f029621a2061b1677ee7">&#9670;&nbsp;</a></span>I2C_GetFlagStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a> I2C_GetFlagStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>I2C_FLAG</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the specified I2C flag is set or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_FLAG</td><td>specifies the flag to check. This parameter can be one of the following values: <ul>
<li>I2C_FLAG_DUALF: Dual flag (Slave mode) </li>
<li>I2C_FLAG_SMBHOST: SMBus host header (Slave mode) </li>
<li>I2C_FLAG_SMBDEFAULT: SMBus default header (Slave mode) </li>
<li>I2C_FLAG_GENCALL: General call header flag (Slave mode) </li>
<li>I2C_FLAG_TRA: Transmitter/Receiver flag </li>
<li>I2C_FLAG_BUSY: Bus busy flag </li>
<li>I2C_FLAG_MSL: Master/Slave flag </li>
<li>I2C_FLAG_SMBALERT: SMBus Alert flag </li>
<li>I2C_FLAG_TIMEOUT: Timeout or Tlow error flag </li>
<li>I2C_FLAG_PECERR: PEC error in reception flag </li>
<li>I2C_FLAG_OVR: Overrun/Underrun flag (Slave mode) </li>
<li>I2C_FLAG_AF: Acknowledge failure flag </li>
<li>I2C_FLAG_ARLO: Arbitration lost flag (Master mode) </li>
<li>I2C_FLAG_BERR: Bus error flag </li>
<li>I2C_FLAG_TXE: Data register empty flag (Transmitter) </li>
<li>I2C_FLAG_RXNE: Data register not empty (Receiver) flag </li>
<li>I2C_FLAG_STOPF: Stop detection flag (Slave mode) </li>
<li>I2C_FLAG_ADD10: 10-bit header sent flag (Master mode) </li>
<li>I2C_FLAG_BTF: Byte transfer finished flag </li>
<li>I2C_FLAG_ADDR: Address sent flag (Master mode) "ADSL" Address matched flag (Slave mode)"ENDAD" </li>
<li>I2C_FLAG_SB: Start bit flag (Master mode) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>new state of I2C_FLAG (SET or RESET). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01194">1194</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f4xx_8h_source.html#l00287">RESET</a>.</p>
<div class="fragment"><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;{</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="group__Exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a> bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  __IO uint32_t i2creg = 0, i2cxbase = 0;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__flags__definition.html#ga1a2c2a7c50cd8e33e532918106b4f6ce">IS_I2C_GET_FLAG</a>(I2C_FLAG));</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">/* Get the I2Cx peripheral base address */</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  i2cxbase = (uint32_t)I2Cx;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  </div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="comment">/* Read flag register index */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  i2creg = I2C_FLAG &gt;&gt; 28;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  </div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">/* Get bit[23:0] of the flag */</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  I2C_FLAG &amp;= <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  </div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">if</span>(i2creg != 0)</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="comment">/* Get the I2Cx SR1 register address */</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    i2cxbase += 0x14;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">/* Flag in I2Cx SR2 Register */</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    I2C_FLAG = (uint32_t)(I2C_FLAG &gt;&gt; 16);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">/* Get the I2Cx SR2 register address */</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    i2cxbase += 0x18;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  </div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span>(((*(__IO uint32_t *)i2cxbase) &amp; I2C_FLAG) != (uint32_t)<a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">/* I2C_FLAG is set */</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">/* I2C_FLAG is reset */</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  </div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">/* Return the I2C_FLAG status */</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">return</span>  bitstatus;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div><div class="ttc" id="group__Exported__types_html_ga89136caac2e14c55151f527ac02daaff"><div class="ttname"><a href="group__Exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a></div><div class="ttdeci">FlagStatus</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00287">stm32f4xx.h:287</a></div></div>
<div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05"><div class="ttname"><a href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00287">stm32f4xx.h:287</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792"><div class="ttname"><a href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00287">stm32f4xx.h:287</a></div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="group__I2C__flags__definition_html_ga1a2c2a7c50cd8e33e532918106b4f6ce"><div class="ttname"><a href="group__I2C__flags__definition.html#ga1a2c2a7c50cd8e33e532918106b4f6ce">IS_I2C_GET_FLAG</a></div><div class="ttdeci">#define IS_I2C_GET_FLAG(FLAG)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00284">stm32f4xx_i2c.h:284</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga447771fbbd94a56f3570b9f430a069ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga447771fbbd94a56f3570b9f430a069ba">&#9670;&nbsp;</a></span>I2C_GetITStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> I2C_GetITStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>I2C_IT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the specified I2C interrupt has occurred or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_IT</td><td>specifies the interrupt source to check. This parameter can be one of the following values: <ul>
<li>I2C_IT_SMBALERT: SMBus Alert flag </li>
<li>I2C_IT_TIMEOUT: Timeout or Tlow error flag </li>
<li>I2C_IT_PECERR: PEC error in reception flag </li>
<li>I2C_IT_OVR: Overrun/Underrun flag (Slave mode) </li>
<li>I2C_IT_AF: Acknowledge failure flag </li>
<li>I2C_IT_ARLO: Arbitration lost flag (Master mode) </li>
<li>I2C_IT_BERR: Bus error flag </li>
<li>I2C_IT_TXE: Data register empty flag (Transmitter) </li>
<li>I2C_IT_RXNE: Data register not empty (Receiver) flag </li>
<li>I2C_IT_STOPF: Stop detection flag (Slave mode) </li>
<li>I2C_IT_ADD10: 10-bit header sent flag (Master mode) </li>
<li>I2C_IT_BTF: Byte transfer finished flag </li>
<li>I2C_IT_ADDR: Address sent flag (Master mode) "ADSL" Address matched flag (Slave mode)"ENDAD" </li>
<li>I2C_IT_SB: Start bit flag (Master mode) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>new state of I2C_IT (SET or RESET). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01305">1305</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f4xx_8h_source.html#l00287">RESET</a>.</p>
<div class="fragment"><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;{</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="group__Exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  uint32_t enablestatus = 0;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__interrupts__definition.html#gab3d113f3d6b6e6f7896c5d7a8d8c2d01">IS_I2C_GET_IT</a>(I2C_IT));</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">/* Check if the interrupt source is enabled or not */</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  enablestatus = (uint32_t)(((I2C_IT &amp; <a class="code" href="group__I2C.html#ga0befa8c9e0cb00ab52bd8a8d68718706">ITEN_MASK</a>) &gt;&gt; 16) &amp; (I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a2a3e81bd118d1bc52d24a0b0772e6a0c">CR2</a>)) ;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  </div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">/* Get bit[23:0] of the flag */</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  I2C_IT &amp;= <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">/* Check the status of the specified I2C flag */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordflow">if</span> (((I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">SR1</a> &amp; I2C_IT) != (uint32_t)<a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>) &amp;&amp; enablestatus)</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">/* I2C_IT is set */</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">/* I2C_IT is reset */</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    bitstatus = <a class="code" href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">/* Return the I2C_IT status */</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">return</span>  bitstatus;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05"><div class="ttname"><a href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00287">stm32f4xx.h:287</a></div></div>
<div class="ttc" id="group__I2C_html_ga0befa8c9e0cb00ab52bd8a8d68718706"><div class="ttname"><a href="group__I2C.html#ga0befa8c9e0cb00ab52bd8a8d68718706">ITEN_MASK</a></div><div class="ttdeci">#define ITEN_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00104">stm32f4xx_i2c.c:104</a></div></div>
<div class="ttc" id="group__Exported__types_html_gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792"><div class="ttname"><a href="group__Exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00287">stm32f4xx.h:287</a></div></div>
<div class="ttc" id="group__Exported__types_html_gaacbd7ed539db0aacd973a0f6eca34074"><div class="ttname"><a href="group__Exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a></div><div class="ttdeci">enum FlagStatus ITStatus</div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="group__I2C__interrupts__definition_html_gab3d113f3d6b6e6f7896c5d7a8d8c2d01"><div class="ttname"><a href="group__I2C__interrupts__definition.html#gab3d113f3d6b6e6f7896c5d7a8d8c2d01">IS_I2C_GET_IT</a></div><div class="ttdeci">#define IS_I2C_GET_IT(IT)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00236">stm32f4xx_i2c.h:236</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a2a3e81bd118d1bc52d24a0b0772e6a0c"><div class="ttname"><a href="structI2C__TypeDef.html#a2a3e81bd118d1bc52d24a0b0772e6a0c">I2C_TypeDef::CR2</a></div><div class="ttdeci">__IO uint16_t CR2</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00691">stm32f4xx.h:691</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a1e79a16729e8d1032d9fe552d50dce41"><div class="ttname"><a href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">I2C_TypeDef::SR1</a></div><div class="ttdeci">__IO uint16_t SR1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00699">stm32f4xx.h:699</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga29237aea9b5a3ead33167e1d027e9f1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29237aea9b5a3ead33167e1d027e9f1a">&#9670;&nbsp;</a></span>I2C_GetLastEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t I2C_GetLastEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the last I2Cx Event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For detailed description of Events, please refer to section I2C_Events in <a class="el" href="stm32f4xx__i2c_8h.html" title="This file contains all the functions prototypes for the I2C firmware library. ">stm32f4xx_i2c.h</a> file.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>last event </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01139">1139</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  uint32_t lastevent = 0;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  uint32_t flag1 = 0, flag2 = 0;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">/* Read the I2Cx status register */</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  flag1 = I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">SR1</a>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  flag2 = I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a682809d3f8187cdefb9d615e89b67e65">SR2</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  flag2 = flag2 &lt;&lt; 16;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">/* Get the last event value from I2C status register */</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  lastevent = (flag1 | flag2) &amp; <a class="code" href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">/* Return status */</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">return</span> lastevent;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__I2C_html_ga890221cb651a3f30f6d1bca0d9b0e13d"><div class="ttname"><a href="group__I2C.html#ga890221cb651a3f30f6d1bca0d9b0e13d">FLAG_MASK</a></div><div class="ttdeci">#define FLAG_MASK</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8c_source.html#l00103">stm32f4xx_i2c.c:103</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a682809d3f8187cdefb9d615e89b67e65"><div class="ttname"><a href="structI2C__TypeDef.html#a682809d3f8187cdefb9d615e89b67e65">I2C_TypeDef::SR2</a></div><div class="ttdeci">__IO uint16_t SR2</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00701">stm32f4xx.h:701</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a1e79a16729e8d1032d9fe552d50dce41"><div class="ttname"><a href="structI2C__TypeDef.html#a1e79a16729e8d1032d9fe552d50dce41">I2C_TypeDef::SR1</a></div><div class="ttdeci">__IO uint16_t SR1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00699">stm32f4xx.h:699</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga58fed146a06cb81d2940604e460de047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58fed146a06cb81d2940604e460de047">&#9670;&nbsp;</a></span>I2C_ITConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_ITConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>I2C_IT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a>&#160;</td>
          <td class="paramname"><em>NewState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables or disables the specified I2C interrupts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2Cx</td><td>where x can be 1, 2 or 3 to select the I2C peripheral. </td></tr>
    <tr><td class="paramname">I2C_IT</td><td>specifies the I2C interrupts sources to be enabled or disabled. This parameter can be any combination of the following values: <ul>
<li>I2C_IT_BUF: Buffer interrupt mask </li>
<li>I2C_IT_EVT: Event interrupt mask </li>
<li>I2C_IT_ERR: Error interrupt mask </li>
</ul>
</td></tr>
    <tr><td class="paramname">NewState</td><td>new state of the specified I2C interrupts. This parameter can be: ENABLE or DISABLE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01032">1032</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f4xx_8h_source.html#l00289">DISABLE</a>.</p>
<div class="fragment"><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__Exported__types.html#gaffaf7c3f537d7a3370b1bbdda67a2bf6">IS_FUNCTIONAL_STATE</a>(NewState));</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__interrupts__definition.html#gae2695a081871336881f9105d6c847c4f">IS_I2C_CONFIG_IT</a>(I2C_IT));</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  </div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (NewState != <a class="code" href="group__Exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a>)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">/* Enable the selected I2C interrupts */</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a2a3e81bd118d1bc52d24a0b0772e6a0c">CR2</a> |= I2C_IT;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">/* Disable the selected I2C interrupts */</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    I2Cx-&gt;<a class="code" href="structI2C__TypeDef.html#a2a3e81bd118d1bc52d24a0b0772e6a0c">CR2</a> &amp;= (uint16_t)~I2C_IT;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;}</div><div class="ttc" id="group__I2C__interrupts__definition_html_gae2695a081871336881f9105d6c847c4f"><div class="ttname"><a href="group__I2C__interrupts__definition.html#gae2695a081871336881f9105d6c847c4f">IS_I2C_CONFIG_IT</a></div><div class="ttdeci">#define IS_I2C_CONFIG_IT(IT)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00210">stm32f4xx_i2c.h:210</a></div></div>
<div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Exported__types_html_gaffaf7c3f537d7a3370b1bbdda67a2bf6"><div class="ttname"><a href="group__Exported__types.html#gaffaf7c3f537d7a3370b1bbdda67a2bf6">IS_FUNCTIONAL_STATE</a></div><div class="ttdeci">#define IS_FUNCTIONAL_STATE(STATE)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00290">stm32f4xx.h:290</a></div></div>
<div class="ttc" id="group__Exported__types_html_ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d"><div class="ttname"><a href="group__Exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00289">stm32f4xx.h:289</a></div></div>
<div class="ttc" id="structI2C__TypeDef_html_a2a3e81bd118d1bc52d24a0b0772e6a0c"><div class="ttname"><a href="structI2C__TypeDef.html#a2a3e81bd118d1bc52d24a0b0772e6a0c">I2C_TypeDef::CR2</a></div><div class="ttdeci">__IO uint16_t CR2</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00691">stm32f4xx.h:691</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8021dc796d15f997356b0583d6346805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8021dc796d15f997356b0583d6346805">&#9670;&nbsp;</a></span>I2C_ReadRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t I2C_ReadRegister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structI2C__TypeDef.html">I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>I2Cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>I2C_Register</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the specified I2C register and returns its value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I2C_Register</td><td>specifies the register to read. This parameter can be one of the following values: <ul>
<li>I2C_Register_CR1: CR1 register. </li>
<li>I2C_Register_CR2: CR2 register. </li>
<li>I2C_Register_OAR1: OAR1 register. </li>
<li>I2C_Register_OAR2: OAR2 register. </li>
<li>I2C_Register_DR: DR register. </li>
<li>I2C_Register_SR1: SR1 register. </li>
<li>I2C_Register_SR2: SR2 register. </li>
<li>I2C_Register_CCR: CCR register. </li>
<li>I2C_Register_TRISE: TRISE register. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>value of the read register. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__i2c_8c_source.html#l01005">1005</a> of file <a class="el" href="stm32f4xx__i2c_8c_source.html">stm32f4xx_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  __IO uint32_t tmp = 0;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a>(I2Cx));</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__I2C__registers.html#ga37206b258f7930065c308ec7d35f243e">IS_I2C_REGISTER</a>(I2C_Register));</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  tmp = (uint32_t) I2Cx;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  tmp += I2C_Register;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">/* Return the selected register value */</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">return</span> (*(__IO uint16_t *) tmp);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__I2C__registers_html_ga37206b258f7930065c308ec7d35f243e"><div class="ttname"><a href="group__I2C__registers.html#ga37206b258f7930065c308ec7d35f243e">IS_I2C_REGISTER</a></div><div class="ttdeci">#define IS_I2C_REGISTER(REGISTER)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00154">stm32f4xx_i2c.h:154</a></div></div>
<div class="ttc" id="group__I2C__Exported__Constants_html_ga2e57489a40603d6ab7ff115b94eeb303"><div class="ttname"><a href="group__I2C__Exported__Constants.html#ga2e57489a40603d6ab7ff115b94eeb303">IS_I2C_ALL_PERIPH</a></div><div class="ttdeci">#define IS_I2C_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__i2c_8h_source.html#l00076">stm32f4xx_i2c.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
