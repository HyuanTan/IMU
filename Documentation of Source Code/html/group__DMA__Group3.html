<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Document Of Source Code: Double Buffer mode functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Document Of Source Code
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Double Buffer mode functions<div class="ingroups"><a class="el" href="group__STM32F4xx__StdPeriph__Driver.html">STM32F4xx_StdPeriph_Driver</a> &raquo; <a class="el" href="group__DMA.html">DMA</a> &raquo; <a class="el" href="group__DMA__Private__Functions.html">DMA_Private_Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Double Buffer mode functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8d0957e50302efaf48a16c62d14c9ca8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DMA__Group3.html#ga8d0957e50302efaf48a16c62d14c9ca8">DMA_DoubleBufferModeConfig</a> (<a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *DMAy_Streamx, uint32_t Memory1BaseAddr, uint32_t DMA_CurrentMemory)</td></tr>
<tr class="memdesc:ga8d0957e50302efaf48a16c62d14c9ca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures, when the DMAy Streamx is disabled, the double buffer mode and the current memory target.  <a href="#ga8d0957e50302efaf48a16c62d14c9ca8">More...</a><br /></td></tr>
<tr class="separator:ga8d0957e50302efaf48a16c62d14c9ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7fe09e62ea3125db384829dab59ebe3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DMA__Group3.html#ga7fe09e62ea3125db384829dab59ebe3e">DMA_DoubleBufferModeCmd</a> (<a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *DMAy_Streamx, <a class="el" href="group__Exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState)</td></tr>
<tr class="memdesc:ga7fe09e62ea3125db384829dab59ebe3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables or disables the double buffer mode for the selected DMA stream.  <a href="#ga7fe09e62ea3125db384829dab59ebe3e">More...</a><br /></td></tr>
<tr class="separator:ga7fe09e62ea3125db384829dab59ebe3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ebcffd32eb6968ac61cfb64a6bae258"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DMA__Group3.html#ga4ebcffd32eb6968ac61cfb64a6bae258">DMA_MemoryTargetConfig</a> (<a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *DMAy_Streamx, uint32_t MemoryBaseAddr, uint32_t DMA_MemoryTarget)</td></tr>
<tr class="memdesc:ga4ebcffd32eb6968ac61cfb64a6bae258"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the Memory address for the next buffer transfer in double buffer mode (for dynamic use). This function can be called when the DMA Stream is enabled and when the transfer is ongoing.  <a href="#ga4ebcffd32eb6968ac61cfb64a6bae258">More...</a><br /></td></tr>
<tr class="separator:ga4ebcffd32eb6968ac61cfb64a6bae258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74b6624f9faa2f43c9369ddbdeab241c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DMA__Group3.html#ga74b6624f9faa2f43c9369ddbdeab241c">DMA_GetCurrentMemoryTarget</a> (<a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *DMAy_Streamx)</td></tr>
<tr class="memdesc:ga74b6624f9faa2f43c9369ddbdeab241c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current memory target used by double buffer transfer.  <a href="#ga74b6624f9faa2f43c9369ddbdeab241c">More...</a><br /></td></tr>
<tr class="separator:ga74b6624f9faa2f43c9369ddbdeab241c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Double Buffer mode functions. </p>
<pre class="fragment"> ===============================================================================
                         Double Buffer mode functions
 ===============================================================================  

  This subsection provides function allowing to configure and control the double 
  buffer mode parameters.
  
  The Double Buffer mode can be used only when Circular mode is enabled.
  The Double Buffer mode cannot be used when transferring data from Memory to Memory.
  
  The Double Buffer mode allows to set two different Memory addresses from/to which
  the DMA controller will access alternatively (after completing transfer to/from target
  memory 0, it will start transfer to/from target memory 1).
  This allows to reduce software overhead for double buffering and reduce the CPU
  access time.

  Two functions must be called before calling the DMA_Init() function:
   - void DMA_DoubleBufferModeConfig(DMA_Stream_TypeDef* DMAy_Streamx, uint32_t Memory1BaseAddr,
                                uint32_t DMA_CurrentMemory);
   - void DMA_DoubleBufferModeCmd(DMA_Stream_TypeDef* DMAy_Streamx, FunctionalState NewState);
   
  DMA_DoubleBufferModeConfig() is called to configure the Memory 1 base address and the first
  Memory target from/to which the transfer will start after enabling the DMA Stream.
  Then DMA_DoubleBufferModeCmd() must be called to enable the Double Buffer mode (or disable 
  it when it should not be used).
  
   
  Two functions can be called dynamically when the transfer is ongoing (or when the DMA Stream is 
  stopped) to modify on of the target Memories addresses or to check wich Memory target is currently
   used:
    - void DMA_MemoryTargetConfig(DMA_Stream_TypeDef* DMAy_Streamx, uint32_t MemoryBaseAddr,
                            uint32_t DMA_MemoryTarget);
    - uint32_t DMA_GetCurrentMemoryTarget(DMA_Stream_TypeDef* DMAy_Streamx);

  DMA_MemoryTargetConfig() can be called to modify the base address of one of the two target Memories.
  The Memory of which the base address will be modified must not be currently be used by the DMA Stream
  (ie. if the DMA Stream is currently transferring from Memory 1 then you can only modify base address
  of target Memory 0 and vice versa).
  To check this condition, it is recommended to use the function DMA_GetCurrentMemoryTarget() which
  returns the index of the Memory target currently in use by the DMA Stream.</pre> <h2 class="groupheader">Function Documentation</h2>
<a id="ga7fe09e62ea3125db384829dab59ebe3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7fe09e62ea3125db384829dab59ebe3e">&#9670;&nbsp;</a></span>DMA_DoubleBufferModeCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DMA_DoubleBufferModeCmd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>DMAy_Streamx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a>&#160;</td>
          <td class="paramname"><em>NewState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables or disables the double buffer mode for the selected DMA stream. </p>
<dl class="section note"><dt>Note</dt><dd>This function can be called only when the DMA Stream is disabled. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DMAy_Streamx</td><td>where y can be 1 or 2 to select the DMA and x can be 0 to 7 to select the DMA Stream. </td></tr>
    <tr><td class="paramname">NewState</td><td>new state of the DMAy Streamx double buffer mode. This parameter can be: ENABLE or DISABLE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__dma_8c_source.html#l00749">749</a> of file <a class="el" href="stm32f4xx__dma_8c_source.html">stm32f4xx_dma.c</a>.</p>

<p class="reference">References <a class="el" href="stm32f4xx_8h_source.html#l00289">DISABLE</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{  </div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a>(DMAy_Streamx));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__Exported__types.html#gaffaf7c3f537d7a3370b1bbdda67a2bf6">IS_FUNCTIONAL_STATE</a>(NewState));</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">/* Configure the Double Buffer mode */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (NewState != <a class="code" href="group__Exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a>)</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">/* Enable the Double buffer mode */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">CR</a> |= (uint32_t)<a class="code" href="group__Peripheral__Registers__Bits__Definition.html#ga53a1cde736b2afc5a394a67849f0c497">DMA_SxCR_DBM</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">/* Disable the Double buffer mode */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">CR</a> &amp;= ~(uint32_t)<a class="code" href="group__Peripheral__Registers__Bits__Definition.html#ga53a1cde736b2afc5a394a67849f0c497">DMA_SxCR_DBM</a>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Peripheral__Registers__Bits__Definition_html_ga53a1cde736b2afc5a394a67849f0c497"><div class="ttname"><a href="group__Peripheral__Registers__Bits__Definition.html#ga53a1cde736b2afc5a394a67849f0c497">DMA_SxCR_DBM</a></div><div class="ttdeci">#define DMA_SxCR_DBM</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l03083">stm32f4xx.h:3083</a></div></div>
<div class="ttc" id="group__Exported__types_html_gaffaf7c3f537d7a3370b1bbdda67a2bf6"><div class="ttname"><a href="group__Exported__types.html#gaffaf7c3f537d7a3370b1bbdda67a2bf6">IS_FUNCTIONAL_STATE</a></div><div class="ttdeci">#define IS_FUNCTIONAL_STATE(STATE)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00290">stm32f4xx.h:290</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_ab40c89c59391aaa9d9a8ec011dd0907a"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">DMA_Stream_TypeDef::CR</a></div><div class="ttdeci">__IO uint32_t CR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00475">stm32f4xx.h:475</a></div></div>
<div class="ttc" id="group__DMA__Exported__Constants_html_gabcab9fa1c48b148703a8f41c1d99e0c8"><div class="ttname"><a href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a></div><div class="ttdeci">#define IS_DMA_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00112">stm32f4xx_dma.h:112</a></div></div>
<div class="ttc" id="group__Exported__types_html_ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d"><div class="ttname"><a href="group__Exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00289">stm32f4xx.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8d0957e50302efaf48a16c62d14c9ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d0957e50302efaf48a16c62d14c9ca8">&#9670;&nbsp;</a></span>DMA_DoubleBufferModeConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DMA_DoubleBufferModeConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>DMAy_Streamx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Memory1BaseAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>DMA_CurrentMemory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures, when the DMAy Streamx is disabled, the double buffer mode and the current memory target. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DMAy_Streamx</td><td>where y can be 1 or 2 to select the DMA and x can be 0 to 7 to select the DMA Stream. </td></tr>
    <tr><td class="paramname">Memory1BaseAddr</td><td>the base address of the second buffer (Memory 1) </td></tr>
    <tr><td class="paramname">DMA_CurrentMemory</td><td>specifies which memory will be first buffer for the transactions when the Stream will be enabled. This parameter can be one of the following values: <ul>
<li>DMA_Memory_0: Memory 0 is the current buffer. </li>
<li>DMA_Memory_1: Memory 1 is the current buffer.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Memory0BaseAddr is set by the DMA structure configuration in <a class="el" href="group__DMA__Group1.html#gaced8a4149acfb0a50b50e63273a87148" title="Initializes the DMAy Streamx according to the specified parameters in the DMA_InitStruct structure...">DMA_Init()</a>.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__dma_8c_source.html#l00718">718</a> of file <a class="el" href="stm32f4xx__dma_8c_source.html">stm32f4xx_dma.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{  </div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a>(DMAy_Streamx));</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__memory__targets__definitions.html#ga87d6abab18d2b4bb86db909854cc1f02">IS_DMA_CURRENT_MEM</a>(DMA_CurrentMemory));</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (DMA_CurrentMemory != <a class="code" href="group__DMA__memory__targets__definitions.html#gadb576bccef5f2fc65fe9b451033bdc95">DMA_Memory_0</a>)</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">/* Set Memory 1 as current memory address */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">CR</a> |= (uint32_t)(<a class="code" href="group__Peripheral__Registers__Bits__Definition.html#gadd36c677ee53f56dc408cd549e64cf7d">DMA_SxCR_CT</a>);    </div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">/* Set Memory 0 as current memory address */</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">CR</a> &amp;= ~(uint32_t)(<a class="code" href="group__Peripheral__Registers__Bits__Definition.html#gadd36c677ee53f56dc408cd549e64cf7d">DMA_SxCR_CT</a>);    </div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">/* Write to DMAy Streamx M1AR */</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#aee7782244ceb4791d9a3891804ac47ac">M1AR</a> = Memory1BaseAddr;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Peripheral__Registers__Bits__Definition_html_gadd36c677ee53f56dc408cd549e64cf7d"><div class="ttname"><a href="group__Peripheral__Registers__Bits__Definition.html#gadd36c677ee53f56dc408cd549e64cf7d">DMA_SxCR_CT</a></div><div class="ttdeci">#define DMA_SxCR_CT</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l03082">stm32f4xx.h:3082</a></div></div>
<div class="ttc" id="group__DMA__memory__targets__definitions_html_gadb576bccef5f2fc65fe9b451033bdc95"><div class="ttname"><a href="group__DMA__memory__targets__definitions.html#gadb576bccef5f2fc65fe9b451033bdc95">DMA_Memory_0</a></div><div class="ttdeci">#define DMA_Memory_0</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00540">stm32f4xx_dma.h:540</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_aee7782244ceb4791d9a3891804ac47ac"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#aee7782244ceb4791d9a3891804ac47ac">DMA_Stream_TypeDef::M1AR</a></div><div class="ttdeci">__IO uint32_t M1AR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00479">stm32f4xx.h:479</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_ab40c89c59391aaa9d9a8ec011dd0907a"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">DMA_Stream_TypeDef::CR</a></div><div class="ttdeci">__IO uint32_t CR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00475">stm32f4xx.h:475</a></div></div>
<div class="ttc" id="group__DMA__memory__targets__definitions_html_ga87d6abab18d2b4bb86db909854cc1f02"><div class="ttname"><a href="group__DMA__memory__targets__definitions.html#ga87d6abab18d2b4bb86db909854cc1f02">IS_DMA_CURRENT_MEM</a></div><div class="ttdeci">#define IS_DMA_CURRENT_MEM(MEM)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00543">stm32f4xx_dma.h:543</a></div></div>
<div class="ttc" id="group__DMA__Exported__Constants_html_gabcab9fa1c48b148703a8f41c1d99e0c8"><div class="ttname"><a href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a></div><div class="ttdeci">#define IS_DMA_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00112">stm32f4xx_dma.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga74b6624f9faa2f43c9369ddbdeab241c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga74b6624f9faa2f43c9369ddbdeab241c">&#9670;&nbsp;</a></span>DMA_GetCurrentMemoryTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t DMA_GetCurrentMemoryTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>DMAy_Streamx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current memory target used by double buffer transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DMAy_Streamx</td><td>where y can be 1 or 2 to select the DMA and x can be 0 to 7 to select the DMA Stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>memory target number: 0 for Memory0 or 1 for Memory1. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__dma_8c_source.html#l00816">816</a> of file <a class="el" href="stm32f4xx__dma_8c_source.html">stm32f4xx_dma.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;{</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  uint32_t tmp = 0;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  </div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a>(DMAy_Streamx));</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">/* Get the current memory target */</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">if</span> ((DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">CR</a> &amp; <a class="code" href="group__Peripheral__Registers__Bits__Definition.html#gadd36c677ee53f56dc408cd549e64cf7d">DMA_SxCR_CT</a>) != 0)</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="comment">/* Current memory buffer used is Memory 1 */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    tmp = 1;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }  </div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">/* Current memory buffer used is Memory 0 */</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    tmp = 0;    </div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">return</span> tmp;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="group__Peripheral__Registers__Bits__Definition_html_gadd36c677ee53f56dc408cd549e64cf7d"><div class="ttname"><a href="group__Peripheral__Registers__Bits__Definition.html#gadd36c677ee53f56dc408cd549e64cf7d">DMA_SxCR_CT</a></div><div class="ttdeci">#define DMA_SxCR_CT</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l03082">stm32f4xx.h:3082</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_ab40c89c59391aaa9d9a8ec011dd0907a"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#ab40c89c59391aaa9d9a8ec011dd0907a">DMA_Stream_TypeDef::CR</a></div><div class="ttdeci">__IO uint32_t CR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00475">stm32f4xx.h:475</a></div></div>
<div class="ttc" id="group__DMA__Exported__Constants_html_gabcab9fa1c48b148703a8f41c1d99e0c8"><div class="ttname"><a href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a></div><div class="ttdeci">#define IS_DMA_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00112">stm32f4xx_dma.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4ebcffd32eb6968ac61cfb64a6bae258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ebcffd32eb6968ac61cfb64a6bae258">&#9670;&nbsp;</a></span>DMA_MemoryTargetConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DMA_MemoryTargetConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDMA__Stream__TypeDef.html">DMA_Stream_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>DMAy_Streamx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>MemoryBaseAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>DMA_MemoryTarget</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the Memory address for the next buffer transfer in double buffer mode (for dynamic use). This function can be called when the DMA Stream is enabled and when the transfer is ongoing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DMAy_Streamx</td><td>where y can be 1 or 2 to select the DMA and x can be 0 to 7 to select the DMA Stream. </td></tr>
    <tr><td class="paramname">MemoryBaseAddr</td><td>The base address of the target memory buffer </td></tr>
    <tr><td class="paramname">DMA_MemoryTarget</td><td>Next memory target to be used. This parameter can be one of the following values: <ul>
<li>DMA_Memory_0: To use the memory address 0 </li>
<li>DMA_Memory_1: To use the memory address 1</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>It is not allowed to modify the Base Address of a target Memory when this target is involved in the current transfer. ie. If the DMA Stream is currently transferring to/from Memory 1, then it not possible to modify Base address of Memory 1, but it is possible to modify Base address of Memory 0. To know which Memory is currently used, you can use the function <a class="el" href="group__DMA__Group3.html#ga74b6624f9faa2f43c9369ddbdeab241c" title="Returns the current memory target used by double buffer transfer. ">DMA_GetCurrentMemoryTarget()</a>.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32f4xx__dma_8c_source.html#l00790">790</a> of file <a class="el" href="stm32f4xx__dma_8c_source.html">stm32f4xx_dma.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">/* Check the parameters */</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a>(DMAy_Streamx));</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <a class="code" href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a>(<a class="code" href="group__DMA__memory__targets__definitions.html#ga87d6abab18d2b4bb86db909854cc1f02">IS_DMA_CURRENT_MEM</a>(DMA_MemoryTarget));</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    </div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">/* Check the Memory target to be configured */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">if</span> (DMA_MemoryTarget != <a class="code" href="group__DMA__memory__targets__definitions.html#gadb576bccef5f2fc65fe9b451033bdc95">DMA_Memory_0</a>)</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">/* Write to DMAy Streamx M1AR */</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#aee7782244ceb4791d9a3891804ac47ac">M1AR</a> = MemoryBaseAddr;    </div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  }  </div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">/* Write to DMAy Streamx M0AR */</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    DMAy_Streamx-&gt;<a class="code" href="structDMA__Stream__TypeDef.html#a63b4d166f4ab5024db6b493a7ab7b640">M0AR</a> = MemoryBaseAddr;  </div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="ttc" id="group__Library__configuration__section_html_ga631dea7b230e600555f979c62af1de21"><div class="ttname"><a href="group__Library__configuration__section.html#ga631dea7b230e600555f979c62af1de21">assert_param</a></div><div class="ttdeci">#define assert_param(expr)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00061">stm32f4xx.h:61</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_a63b4d166f4ab5024db6b493a7ab7b640"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#a63b4d166f4ab5024db6b493a7ab7b640">DMA_Stream_TypeDef::M0AR</a></div><div class="ttdeci">__IO uint32_t M0AR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00478">stm32f4xx.h:478</a></div></div>
<div class="ttc" id="group__DMA__memory__targets__definitions_html_gadb576bccef5f2fc65fe9b451033bdc95"><div class="ttname"><a href="group__DMA__memory__targets__definitions.html#gadb576bccef5f2fc65fe9b451033bdc95">DMA_Memory_0</a></div><div class="ttdeci">#define DMA_Memory_0</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00540">stm32f4xx_dma.h:540</a></div></div>
<div class="ttc" id="structDMA__Stream__TypeDef_html_aee7782244ceb4791d9a3891804ac47ac"><div class="ttname"><a href="structDMA__Stream__TypeDef.html#aee7782244ceb4791d9a3891804ac47ac">DMA_Stream_TypeDef::M1AR</a></div><div class="ttdeci">__IO uint32_t M1AR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx_8h_source.html#l00479">stm32f4xx.h:479</a></div></div>
<div class="ttc" id="group__DMA__memory__targets__definitions_html_ga87d6abab18d2b4bb86db909854cc1f02"><div class="ttname"><a href="group__DMA__memory__targets__definitions.html#ga87d6abab18d2b4bb86db909854cc1f02">IS_DMA_CURRENT_MEM</a></div><div class="ttdeci">#define IS_DMA_CURRENT_MEM(MEM)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00543">stm32f4xx_dma.h:543</a></div></div>
<div class="ttc" id="group__DMA__Exported__Constants_html_gabcab9fa1c48b148703a8f41c1d99e0c8"><div class="ttname"><a href="group__DMA__Exported__Constants.html#gabcab9fa1c48b148703a8f41c1d99e0c8">IS_DMA_ALL_PERIPH</a></div><div class="ttdeci">#define IS_DMA_ALL_PERIPH(PERIPH)</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4xx__dma_8h_source.html#l00112">stm32f4xx_dma.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
